<%
/**
 * @var {Array} versions
 */
/**
 * @var {Object} sails
 */
/**
 * @var {Router} Router
 */
%>

<h3 class="page-header">
  Запарсить патч
  <form method="post" action="<%- Router.getRoute('patch', 'fill-versions', 'admin') %>">
    <button class="btn btn-primary" type="submit">Загрузить все версии патча</button>
  </form>
</h3>
<form method="post" action="<%- Router.getRoute('patch', 'parse', 'admin') %>" class="form-inline">
  <div class="form-group">
    <label for="patch-version">Версия патча: </label>
    <select id="patch-version" name="patchId" class="form-control">
      <% for(var i in versions) { %>
        <option value="<%= versions[i].id %>"><%= versions[i].version %></option>
      <% } %>
    </select>
  </div>

  <button class="btn btn-primary" type="submit">Начать</button>

</form>

<table class="table">
  <thead>
    <th><%= __('version') %></th>
    <th><%= __('num_changes') %></th>
    <th><%= __('actions') %></th>
  </thead>
  <tbody>
    <% for(let i in versions){ %>
      <tr>
        <td><%= versions[i].version %></td>
        <td>0</td>
        <td class="icons">
          <a href="<%= Router.getRoute('patch', 'load/' + versions[i].id, 'admin') %>"><span class="icon--action glyphicon glyphicon-save load"></span></a>
          <a href="<%= Router.getRoute('patch', versions[i].id, 'admin') %>"><span class="glyphicon glyphicon-pencil icon--action edit"></span></a>
        </td>
      </tr>
    <%} %>
  </tbody>
</table>
